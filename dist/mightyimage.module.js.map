{"version":3,"file":"mightyimage.module.js","sources":["../src/components/mighty_image.tsx"],"sourcesContent":["\n\n declare const VALID_LOADING_VALUES: readonly ['lazy', 'eager', undefined];\n declare type LoadingValue = typeof VALID_LOADING_VALUES[number];\n\n declare const VALID_BOXFIT_VALUES: readonly [\n  'cover',\n  'contain',\n  'fill',\n  'inside',\n  'outside',\n  undefined\n];\n declare type BoxFitValue = typeof VALID_BOXFIT_VALUES[number];\n\n declare const VALID_GRAVITY_VALUES: readonly [\n  'top',\n  'right top',\n  'right',\n  'right bottom',\n  'bottom',\n  'left bottom',\n  'left',\n  ' left top',\n  undefined\n];\n declare type GravityValue = typeof VALID_GRAVITY_VALUES[number];\n\n declare const VALID_FORMAT_VALUES: readonly ['jpeg', 'png', 'webp', undefined];\n declare type FormatValue = typeof VALID_FORMAT_VALUES[number];\n\n type IProps = {\n  src: string;\n  alt: string;\n  width: number;\n  height: number;\n  tranformations?: {\n    quality?: number;\n    greyscale?: boolean;\n    sepia?: boolean;\n    boxfit?: BoxFitValue;\n    gravity?: GravityValue;\n    croptop?: number;\n    cropleft?: number;\n    smartcrop?: boolean;\n    format?: FormatValue;\n    progressive?: boolean;\n  };\n  sizes?: {\n    sm?: { w: number; h: number };\n    md?: { w: number; h: number };\n    lg?: { w: number; h: number };\n  };\n  label?: {\n    text?: string;\n    top?: number;\n    left?: number;\n    color?: string; // String, hex of a RGBA color without #\n    width?: number;\n    height?: number;\n  };\n  className: string;\n  onClick?: any;\n  loading?: LoadingValue;\n};\n\n function pushParameter(\n  params: URLSearchParams,\n  key: string,\n  value?: string | number | boolean\n) {\n  if (value) {\n    params.set(key, value as string);\n  }\n}\n\nexport const MightyImage = function (props: IProps) {\n  const mightyAccountId = process.env.NEXT_PUBLIC_MIGHTY_IMAGE_ID;\n\n  const url = new URL(props.src);\n\n  url.hostname = 'media.mightyimage.io';\n  url.pathname = `/image/${mightyAccountId}${url.pathname}`; // TODO check if / are correct?\n\n  let screenWidth = 0;\n\n  if (typeof window !== 'undefined') {\n    screenWidth = window.innerWidth;\n  }\n\n  // Sizing and cropping\n  // If no sizes were set, we use the width and height props directly;\n  if (!props.sizes) {\n    pushParameter(url.searchParams, 'w', props.width);\n    pushParameter(url.searchParams, 'h', props.height);\n  }\n  // Check if we are 'sm' w <= 768px\n  else if (screenWidth <= 768 && props.sizes.sm) {\n    pushParameter(url.searchParams, 'w', props.sizes.sm?.w ?? props.width);\n    pushParameter(url.searchParams, 'h', props.sizes.sm?.h ?? props.height);\n  }\n  // Check if we are 'md' w <= 1200px\n  else if (screenWidth <= 1200 && props.sizes.md) {\n    pushParameter(url.searchParams, 'w', props.sizes.md?.w ?? props.width);\n    pushParameter(url.searchParams, 'h', props.sizes.md?.h ?? props.height);\n  }\n  // Otherwise we are 'lg'\n  else if (props.sizes.lg) {\n    pushParameter(url.searchParams, 'w', props.sizes.lg?.w ?? props.width);\n    pushParameter(url.searchParams, 'h', props.sizes.lg?.h ?? props.height);\n  }\n  // default to width and height props;\n  else {\n    pushParameter(url.searchParams, 'w', props.width);\n    pushParameter(url.searchParams, 'h', props.height);\n  }\n\n  pushParameter(url.searchParams, 'bf', props.tranformations?.boxfit);\n  pushParameter(url.searchParams, 'g', props.tranformations?.gravity);\n  pushParameter(url.searchParams, 'ct', props.tranformations?.croptop);\n  pushParameter(url.searchParams, 'cl', props.tranformations?.cropleft);\n  pushParameter(url.searchParams, 'sc', props.tranformations?.smartcrop);\n\n  // Format and quality\n  pushParameter(url.searchParams, 'q', props.tranformations?.quality);\n  pushParameter(url.searchParams, 'f', props.tranformations?.format);\n  pushParameter(url.searchParams, 'p', props.tranformations?.progressive);\n\n  // Filters\n  pushParameter(url.searchParams, 'gs', props.tranformations?.greyscale);\n  pushParameter(url.searchParams, 'sp', props.tranformations?.sepia);\n\n  // Labels\n  pushParameter(url.searchParams, 'ltxt', props.label?.text);\n  pushParameter(url.searchParams, 'll', props.label?.left);\n  pushParameter(url.searchParams, 'lt', props.label?.top);\n  pushParameter(url.searchParams, 'lw', props.label?.width);\n  pushParameter(url.searchParams, 'lh', props.label?.height);\n  pushParameter(url.searchParams, 'lc', props.label?.color);\n\n  return (\n    <img\n      src={url.href}\n      alt={props.alt}\n      width={props.width}\n      height={props.height}\n      className={props.className}\n      onClick={props.onClick}\n      loading={props.loading}\n    />\n  );\n}\n\n"],"names":["pushParameter","params","key","value","set","MightyImage","props","_props$tranformations","_props$tranformations2","_props$tranformations3","_props$tranformations4","_props$tranformations5","_props$tranformations6","_props$tranformations7","_props$tranformations8","_props$tranformations9","_props$tranformations10","_props$label","_props$label2","_props$label3","_props$label4","_props$label5","_props$label6","mightyAccountId","process","env","NEXT_PUBLIC_MIGHTY_IMAGE_ID","url","URL","src","hostname","pathname","screenWidth","window","innerWidth","sizes","sm","_props$sizes$sm$w","_props$sizes$sm","_props$sizes$sm$h","_props$sizes$sm2","searchParams","w","width","h","height","md","_props$sizes$md$w","_props$sizes$md","_props$sizes$md$h","_props$sizes$md2","lg","_props$sizes$lg$w","_props$sizes$lg","_props$sizes$lg$h","_props$sizes$lg2","tranformations","boxfit","gravity","croptop","cropleft","smartcrop","quality","format","progressive","greyscale","sepia","label","text","left","top","color","href","alt","className","onClick","loading"],"mappings":"AAkEC,SAASA,EACRC,EACAC,EACAC,GAEIA,GACFF,EAAOG,IAAIF,EAAKC,EAEpB,CAEa,IAAAE,EAAc,SAAUC,GAAaC,IAAAA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC1CC,EAAkBC,QAAQC,IAAIC,4BAE9BC,EAAM,IAAIC,IAAItB,EAAMuB,KAE1BF,EAAIG,SAAW,uBACfH,EAAII,mBAAqBR,EAAkBI,EAAII,SAE/C,IAAIC,EAAc,EAQlB,GANsB,oBAAXC,SACTD,EAAcC,OAAOC,YAKlB5B,EAAM6B,MAKFH,GAAAA,GAAe,KAAO1B,EAAM6B,MAAMC,GAAI,KAAAC,EAAAC,EAAAC,EAAAC,EAC7CxC,EAAc2B,EAAIc,aAAc,IAAsB,OAAnBJ,EAAEC,OAAFA,EAAEhC,EAAM6B,MAAMC,SAAZE,EAAAA,EAAgBI,GAACL,EAAI/B,EAAMqC,OAChE3C,EAAc2B,EAAIc,aAAc,IAAsBF,OAAnBA,SAAAC,EAAElC,EAAM6B,MAAMC,WAAZI,EAAgBI,GAACL,EAAIjC,EAAMuC,OACjE,MAEQb,GAAAA,GAAe,MAAQ1B,EAAM6B,MAAMW,GAAI,KAAAC,EAAAC,EAAAC,EAAAC,EAC9ClD,EAAc2B,EAAIc,aAAc,WAAGM,EAAgB,OAAhBC,EAAE1C,EAAM6B,MAAMW,SAAE,EAAdE,EAAgBN,GAACK,EAAIzC,EAAMqC,OAChE3C,EAAc2B,EAAIc,aAAc,IAAsBQ,OAAnBA,SAAAC,EAAE5C,EAAM6B,MAAMW,WAAZI,EAAgBN,GAACK,EAAI3C,EAAMuC,OACjE,MAEQvC,GAAAA,EAAM6B,MAAMgB,GAAI,CAAA,IAAAC,EAAAC,EAAAC,EAAAC,EACvBvD,EAAc2B,EAAIc,aAAc,IAAsB,OAAnBW,EAAEC,OAAFA,EAAE/C,EAAM6B,MAAMgB,SAAZE,EAAAA,EAAgBX,GAACU,EAAI9C,EAAMqC,OAChE3C,EAAc2B,EAAIc,aAAc,WAAGa,EAAEC,OAAFA,EAAEjD,EAAM6B,MAAMgB,SAAZI,EAAAA,EAAgBX,GAACU,EAAIhD,EAAMuC,OACjE,MAGC7C,EAAc2B,EAAIc,aAAc,IAAKnC,EAAMqC,OAC3C3C,EAAc2B,EAAIc,aAAc,IAAKnC,EAAMuC,aArB3C7C,EAAc2B,EAAIc,aAAc,IAAKnC,EAAMqC,OAC3C3C,EAAc2B,EAAIc,aAAc,IAAKnC,EAAMuC,QA8C7C,OAvBA7C,EAAc2B,EAAIc,aAAc,KAAMlC,OAAFA,EAAED,EAAMkD,qBAANjD,EAAAA,EAAsBkD,QAC5DzD,EAAc2B,EAAIc,aAAc,IAAyB,OAAtBjC,EAAEF,EAAMkD,qBAAc,EAApBhD,EAAsBkD,SAC3D1D,EAAc2B,EAAIc,aAAc,YAAIhC,EAAEH,EAAMkD,uBAAN/C,EAAsBkD,SAC5D3D,EAAc2B,EAAIc,aAAc,YAAI/B,EAAEJ,EAAMkD,uBAAN9C,EAAsBkD,UAC5D5D,EAAc2B,EAAIc,aAAc,KAAM9B,OAAFA,EAAEL,EAAMkD,qBAAN7C,EAAAA,EAAsBkD,WAG5D7D,EAAc2B,EAAIc,aAAc,IAAyB,OAAtB7B,EAAEN,EAAMkD,qBAAc,EAApB5C,EAAsBkD,SAC3D9D,EAAc2B,EAAIc,aAAc,WAAG5B,EAAEP,EAAMkD,uBAAN3C,EAAsBkD,QAC3D/D,EAAc2B,EAAIc,aAAc,IAAK3B,OAAFA,EAAER,EAAMkD,qBAAN1C,EAAAA,EAAsBkD,aAG3DhE,EAAc2B,EAAIc,aAAc,KAAM1B,OAAFA,EAAET,EAAMkD,qBAANzC,EAAAA,EAAsBkD,WAC5DjE,EAAc2B,EAAIc,aAAc,KAA0B,OAAtBzB,EAAEV,EAAMkD,qBAAc,EAApBxC,EAAsBkD,OAG5DlE,EAAc2B,EAAIc,aAAc,cAAMxB,EAAEX,EAAM6D,cAANlD,EAAamD,MACrDpE,EAAc2B,EAAIc,aAAc,KAAMvB,OAAFA,EAAEZ,EAAM6D,YAANjD,EAAAA,EAAamD,MACnDrE,EAAc2B,EAAIc,aAAc,KAAiB,OAAbtB,EAAEb,EAAM6D,YAAK,EAAXhD,EAAamD,KACnDtE,EAAc2B,EAAIc,aAAc,KAAiB,OAAbrB,EAAEd,EAAM6D,YAAK,EAAX/C,EAAauB,OACnD3C,EAAc2B,EAAIc,aAAc,YAAIpB,EAAEf,EAAM6D,cAAN9C,EAAawB,QACnD7C,EAAc2B,EAAIc,aAAc,KAAMnB,OAAFA,EAAEhB,EAAM6D,YAAN7C,EAAAA,EAAaiD,OAGjD3B,EACEf,MAAAA,CAAAA,IAAKF,EAAI6C,KACTC,IAAKnE,EAAMmE,IACX9B,MAAOrC,EAAMqC,MACbE,OAAQvC,EAAMuC,OACd6B,UAAWpE,EAAMoE,UACjBC,QAASrE,EAAMqE,QACfC,QAAStE,EAAMsE,SAGrB"}